(this["webpackJsonpcurrency-test-app"]=this["webpackJsonpcurrency-test-app"]||[]).push([[0],{406:function(e,t,a){},407:function(e,t,a){},408:function(e,t,a){},443:function(e,t){},445:function(e,t){},454:function(e,t){},456:function(e,t){},481:function(e,t){},483:function(e,t){},484:function(e,t){},489:function(e,t){},491:function(e,t){},497:function(e,t){},499:function(e,t){},518:function(e,t){},530:function(e,t){},533:function(e,t){},559:function(e,t){},660:function(e,t,a){},661:function(e,t,a){},664:function(e,t,a){},736:function(e,t,a){},737:function(e,t,a){},746:function(e,t,a){},873:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(42),s=a.n(r),o=(a(406),a(407),a(408),a(49)),u=a(50),i=a.n(u),l=a(132),d=a(34),j=a(70),b=a(167),p=function(e){return e?e.toISOString().slice(0,10):""},f=function(e){return new Date(e).toString().slice(4,10)},v=new(a(414))({apiKey:"5f10a68b472c4e3f3bb2108c08e24178"}),h=function(e){return Object(l.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=p(e||new Date),t.prev=1,t.next=4,v.historical({currencies:["EUR","USD","CHF"],date:a});case 4:return n=t.sent,t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},O=function(e){return e.sort((function(e,t){return t.timestamp-e.timestamp}))},m="USD",x="EUR",D="CHF",g={USD:{value:"USD",label:"USD"},EUR:{value:"EUR",label:"EUR"},CHF:{value:"CHF",label:"CHF"}},y=[g.USD,g.EUR,g.CHF],C="FIRST",S="SECOND",U=function(e){return e?e.toFixed(3).toString():""},F={data:[],currentDate:p(new Date),currentQuotes:null,convertedValues:null,chartData:[],selectedChartGroup:null},k=Object(b.b)({name:"currency",initialState:F,reducers:{setDataSegment:function(e,t){var a={date:t.payload.date,quotes:t.payload.quotes,timestamp:t.payload.timestamp},n=O([].concat(Object(j.a)(e.data),[a]));return Object(d.a)(Object(d.a)({},e),{},{data:n})},setDataArray:function(e,t){var a=O(t.payload),n=a[0].date,c=a[0].quotes;return Object(d.a)(Object(d.a)({},e),{},{data:a,currentDate:n,currentQuotes:c})},setCurrentQuotes:function(e,t){var a=t.payload.quotes,n=t.payload.date;return Object(d.a)(Object(d.a)({},e),{},{currentDate:n,currentQuotes:a})},setConvertValues:function(e,t){var a,n=t.payload.currencyName,c=t.payload.value,r=e.currentQuotes;if(r)return a=function(e,t,a){var n=null,c=+(e.USDCHF/e.USDEUR).toFixed(6);switch(a){case m:n={usdValue:t,eurValue:U(+t*e.USDEUR),chfValue:U(+t*e.USDCHF)};break;case x:n={usdValue:U(+t/e.USDEUR),eurValue:t,chfValue:U(+t*c)};break;case D:n={usdValue:U(+t/e.USDCHF),eurValue:U(+t/c),chfValue:t}}return n}(r,c,n),Object(d.a)(Object(d.a)({},e),{},{convertedValues:a})},updateChartData:function(e){var t=e.selectedChartGroup,a=(t&&t.first?t.first.value:"")+(t&&t.second?t.second.value:""),n=function(e,t){for(var a=[],n=0;n<14;n++)switch(t){case m+x:var c={value:+e[n].quotes.USDEUR.toFixed(3),date:f(e[n].date)};a=[].concat(Object(j.a)(a),[c]);break;case m+D:var r={value:+e[n].quotes.USDCHF.toFixed(3),date:f(e[n].date)};a=[].concat(Object(j.a)(a),[r]);break;case x+D:var s={value:+(e[n].quotes.USDCHF/e[n].quotes.USDEUR).toFixed(3),date:f(e[n].date)};a=[].concat(Object(j.a)(a),[s]);break;case x+m:var o={value:+(e[n].quotes.USDUSD/e[n].quotes.USDEUR).toFixed(3),date:f(e[n].date)};a=[].concat(Object(j.a)(a),[o]);break;case D+m:var u={value:+(e[n].quotes.USDUSD/e[n].quotes.USDCHF).toFixed(3),date:f(e[n].date)};a=[].concat(Object(j.a)(a),[u]);break;case D+x:var i={value:+(e[n].quotes.USDEUR/e[n].quotes.USDCHF).toFixed(3),date:f(e[n].date)};a=[].concat(Object(j.a)(a),[i])}return a}(e.data,a);return Object(d.a)(Object(d.a)({},e),{},{chartData:n})},setSelectedChartGroup:function(e,t){var a=t.payload.option,n=t.payload.position,c=function(e,t,a){var n=e;switch(a){case C:n=n&&n.second&&n.second.value===t.value?{first:t,second:n.first}:{first:t,second:n?n.second:null};break;case S:n=n&&n.first&&n.first.value===t.value?{first:n.second,second:t}:{first:n?n.first:null,second:t}}return n}(e.selectedChartGroup,a,n);return Object(d.a)(Object(d.a)({},e),{},{selectedChartGroup:c})}}}),w=k.actions,N=w.setDataSegment,E=w.setDataArray,q=w.setCurrentQuotes,V=w.setConvertValues,R=w.updateChartData,H=w.setSelectedChartGroup,G=function(e){return e.currency},A=k.reducer,I=(a(660),a(40),a(661),a(3)),M=function(e){var t=e.id,a=e.onChange,n=e.value,c=e.name,r=["input-component"].join(" ").trim();return Object(I.jsxs)("div",{className:r,children:[Object(I.jsx)("label",{children:c}),Object(I.jsx)("input",{id:t,type:"text",value:n,onChange:a})]})},Q=a(378),J=a.n(Q),B=(a(663),a(664),function(e){var t=e.name,a=e.selected,n=e.onChange;return Object(I.jsxs)("div",{className:"datepicker-custom-component",children:[Object(I.jsx)("label",{children:t}),Object(I.jsx)(J.a,{dateFormat:"dd.MM.yyyy",popperPlacement:"auto",selected:a,onChange:n,onChangeRaw:function(e){e.preventDefault()},maxDate:new Date})]})}),K=a.p+"static/media/european-union.3f54ee93.svg",P=a.p+"static/media/united-states.c29455bd.svg",W=a.p+"static/media/switzerland.167517f0.svg",z=a.p+"static/media/calendar.e78d8c05.svg";function T(){var e=Object(o.b)(),t=Object(o.c)(G),a=t.convertedValues,n=t.currentDate,c=function(t){var a,n={value:(a=t.target.value,a.replace(/^\.|[^\d\.]|\.(?=.*\.)|^0+(?=\d)/g,"")),currencyName:t.target.id};e(V(n))};return Object(I.jsxs)("form",{className:"form-card",children:[Object(I.jsx)("h2",{children:"Converter"}),Object(I.jsxs)("div",{className:"input-plus-image",children:[Object(I.jsx)(B,{name:"Date",selected:new Date(n),onChange:function(t){e(function(e){return function(){var t=Object(l.a)(i.a.mark((function t(a,n){var c,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=n().currency.data,r=0;case 2:if(!(r<c.length)){t.next=10;break}if(c[r].date!==p(e)){t.next=7;break}return a(q({quotes:c[r].quotes,date:p(e)})),a(V({value:"1",currencyName:m})),t.abrupt("return");case 7:r++,t.next=2;break;case 10:return t.prev=10,t.next=13,h(e);case 13:s=t.sent,a(N(s)),a(q({quotes:s.quotes,date:p(e)})),a(V({value:"1",currencyName:m})),localStorage.setItem("localCurrencyData",JSON.stringify(n().currency.data)),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(10),console.log(t.t0);case 23:case"end":return t.stop()}}),t,null,[[10,20]])})));return function(e,a){return t.apply(this,arguments)}}()}(t))}}),Object(I.jsx)("img",{src:z,alt:"calendar"})]}),Object(I.jsx)("hr",{}),a&&Object(I.jsxs)("div",{className:"inputs-layout",children:[Object(I.jsxs)("div",{className:"input-plus-image",children:[Object(I.jsx)(M,{id:m,name:m,value:a.usdValue,onChange:c}),Object(I.jsx)("img",{src:P,alt:"US"})]}),Object(I.jsxs)("div",{className:"input-plus-image",children:[Object(I.jsx)(M,{id:x,name:x,value:a.eurValue,onChange:c}),Object(I.jsx)("img",{src:K,alt:"EU"})]}),Object(I.jsxs)("div",{className:"input-plus-image",children:[Object(I.jsx)(M,{id:D,name:D,value:a.chfValue,onChange:c}),Object(I.jsx)("img",{src:W,alt:"Switzerland"})]})]})]})}a(736);var $=a(394),L=(a(737),function(e){var t=e.onChange,a=e.value,n=e.id,c=e.options;return Object(I.jsx)("div",{className:"select-component",children:Object(I.jsx)($.a,{options:c,classNamePrefix:"custom",onChange:function(e){t&&t(e,n)},value:a,captureMenuScroll:!1,menuPlacement:"auto",theme:function(e){return Object(d.a)(Object(d.a)({},e),{},{colors:Object(d.a)(Object(d.a)({},e.colors),{},{primary25:"#ECEFF1",primary:"#DD2C00",neutral20:"#ECEFF1"})})}})})}),X=(a(746),a(882)),Y=a(876),Z=a(880),_=a(392),ee=a(393),te=a(171),ae=a(396),ne=function(e){var t=e.data.slice().reverse();return Object(I.jsx)("div",{className:"chart-component",children:Object(I.jsx)(X.a,{children:Object(I.jsxs)(Y.a,{data:t,margin:{top:10,right:30,left:0,bottom:0},children:[Object(I.jsx)("defs",{children:Object(I.jsxs)("linearGradient",{id:"customGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(I.jsx)("stop",{offset:"5%",stopColor:"#FF3D00",stopOpacity:.6}),Object(I.jsx)("stop",{offset:"95%",stopColor:"#FF9E80",stopOpacity:.2})]})}),Object(I.jsx)(Z.a,{strokeDasharray:"1"}),Object(I.jsx)(_.a,{dataKey:"date",stroke:"#90A4AE"}),Object(I.jsx)(ee.a,{domain:["dataMin - 0.008","dataMax + 0.008"],stroke:"#90A4AE"}),Object(I.jsx)(te.a,{content:Object(I.jsx)(ce,{})}),Object(I.jsx)(ae.a,{type:"linear",activeDot:{fill:"#FBE9E7",strokeWidth:1,stroke:"#DD2C00"},dataKey:"value",stroke:"#DD2C00",fillOpacity:1,fill:"url(#customGradient)"})]})})})},ce=function(e){var t=e.active,a=e.payload,n=e.label;return t&&a&&a.length?Object(I.jsxs)("div",{className:"custom-chart-tooltip",children:[Object(I.jsx)("p",{className:"value",children:a[0].value}),Object(I.jsx)("p",{className:"date",children:n})]}):null};function re(){var e=Object(o.b)(),t=Object(o.c)(G),a=t.selectedChartGroup,n=t.chartData,c=function(t,a){e(H({option:t,position:a})),e(R())};return Object(I.jsxs)("div",{className:"chart-card",children:[Object(I.jsx)("h2",{children:"Chart"}),n&&Object(I.jsx)(ne,{data:n}),a?Object(I.jsxs)("div",{className:"select-group",children:[Object(I.jsx)(L,{options:y,id:C,value:a.first,onChange:c}),Object(I.jsx)(L,{options:y,id:S,value:a.second,onChange:c})]}):null]})}function se(){var e=Object(o.c)(G),t=Object(o.b)();return Object(n.useEffect)((function(){t(function(){var e=Object(l.a)(i.a.mark((function e(t,a){var n,c,r,s,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=localStorage.getItem("localCurrencyData"),(c=n?JSON.parse(n):[]).length&&t(E(c)),r=0;case 4:if(!(r<14)){e.next=22;break}if((s=new Date).setDate(s.getDate()-r),(o=a().currency.data).length&&o[r]&&o[r].date===p(s)){e.next=19;break}return e.prev=9,e.next=12,h(s);case 12:u=e.sent,t(N(u)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),console.log(e.t0);case 19:r++,e.next=4;break;case 22:t(q({quotes:a().currency.data[0].quotes,date:a().currency.data[0].date})),t(V({value:"1",currencyName:m})),t(H({option:g.USD,position:C})),t(H({option:g.EUR,position:S})),t(R()),localStorage.setItem("localCurrencyData",JSON.stringify(a().currency.data));case 28:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t,a){return e.apply(this,arguments)}}())}),[]),console.log("currencyState",e),Object(I.jsxs)("div",{className:"dashboard-wrapper global-container",children:[Object(I.jsx)("h1",{children:"Currency Dashboard"}),Object(I.jsxs)("div",{className:"dashboard-grid",children:[e&&e.data.length&&Object(I.jsx)(T,{}),Object(I.jsx)(re,{"grid-area":"chart"})]})]})}var oe=function(){return Object(I.jsx)("div",{className:"App",children:Object(I.jsx)(se,{})})},ue=Object(b.a)({reducer:{currency:A}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(I.jsx)(c.a.StrictMode,{children:Object(I.jsx)(o.a,{store:ue,children:Object(I.jsx)(oe,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[873,1,2]]]);
//# sourceMappingURL=main.eeefebc4.chunk.js.map