(this["webpackJsonpcurrency-test-app"]=this["webpackJsonpcurrency-test-app"]||[]).push([[0],{407:function(e,t,a){},408:function(e,t,a){},409:function(e,t,a){},444:function(e,t){},446:function(e,t){},455:function(e,t){},457:function(e,t){},482:function(e,t){},484:function(e,t){},485:function(e,t){},490:function(e,t){},492:function(e,t){},498:function(e,t){},500:function(e,t){},519:function(e,t){},531:function(e,t){},534:function(e,t){},560:function(e,t){},661:function(e,t,a){},662:function(e,t,a){},665:function(e,t,a){},737:function(e,t,a){},738:function(e,t,a){},747:function(e,t,a){},874:function(e,t,a){},875:function(e,t,a){},876:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(43),s=a.n(r),o=(a(407),a(408),a(409),a(40)),u=a(50),i=a.n(u),l=a(133),d=a(30),j=a(70),b=a(110),p=function(e){return e?e.toISOString().slice(0,10):""},f=function(e){return new Date(e).toString().slice(4,10)},O=new(a(415))({apiKey:"5f10a68b472c4e3f3bb2108c08e24178"}),v=function(e){return Object(l.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=p(e||new Date),t.prev=1,t.next=4,O.historical({currencies:["EUR","USD","CHF"],date:a});case 4:return n=t.sent,t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},h=function(e){return e.sort((function(e,t){return t.timestamp-e.timestamp}))},m="USD",x="EUR",g="CHF",D={USD:{value:"USD",label:"USD"},EUR:{value:"EUR",label:"EUR"},CHF:{value:"CHF",label:"CHF"}},y=[D.USD,D.EUR,D.CHF],C="FIRST",S="SECOND",U=function(e){return e?e.toFixed(3).toString():""},F=Object(b.b)({name:"messages",initialState:{errorMessage:""},reducers:{setErrorMessage:function(e,t){var a=t.payload;return Object(d.a)(Object(d.a)({},e),{},{errorMessage:a})}}}),w=F.actions.setErrorMessage,k=function(e){return e.messages},N=F.reducer,E={data:[],currentDate:p(new Date),currentQuotes:null,convertedValues:null,chartData:[],selectedChartGroup:null,isFetching:!1},q=Object(b.b)({name:"currency",initialState:E,reducers:{setDataSegment:function(e,t){var a={date:t.payload.date,quotes:t.payload.quotes,timestamp:t.payload.timestamp},n=h([].concat(Object(j.a)(e.data),[a]));return Object(d.a)(Object(d.a)({},e),{},{data:n})},setDataArray:function(e,t){var a=h(t.payload),n=a[0].date,c=a[0].quotes;return Object(d.a)(Object(d.a)({},e),{},{data:a,currentDate:n,currentQuotes:c})},setCurrentQuotes:function(e,t){var a=t.payload.quotes,n=t.payload.date;return Object(d.a)(Object(d.a)({},e),{},{currentDate:n,currentQuotes:a})},setConvertValues:function(e,t){var a,n=t.payload.currencyName,c=t.payload.value,r=e.currentQuotes;if(r)return a=function(e,t,a){var n=null,c=+(e.USDCHF/e.USDEUR).toFixed(6);switch(a){case m:n={usdValue:t,eurValue:U(+t*e.USDEUR),chfValue:U(+t*e.USDCHF)};break;case x:n={usdValue:U(+t/e.USDEUR),eurValue:t,chfValue:U(+t*c)};break;case g:n={usdValue:U(+t/e.USDCHF),eurValue:U(+t/c),chfValue:t}}return n}(r,c,n),Object(d.a)(Object(d.a)({},e),{},{convertedValues:a})},updateChartData:function(e){var t=e.selectedChartGroup,a=(t&&t.first?t.first.value:"")+(t&&t.second?t.second.value:""),n=function(e,t){for(var a=[],n=0;n<14;n++)switch(t){case m+x:var c={value:+e[n].quotes.USDEUR.toFixed(3),date:f(e[n].date)};a=[].concat(Object(j.a)(a),[c]);break;case m+g:var r={value:+e[n].quotes.USDCHF.toFixed(3),date:f(e[n].date)};a=[].concat(Object(j.a)(a),[r]);break;case x+g:var s={value:+(e[n].quotes.USDCHF/e[n].quotes.USDEUR).toFixed(3),date:f(e[n].date)};a=[].concat(Object(j.a)(a),[s]);break;case x+m:var o={value:+(e[n].quotes.USDUSD/e[n].quotes.USDEUR).toFixed(3),date:f(e[n].date)};a=[].concat(Object(j.a)(a),[o]);break;case g+m:var u={value:+(e[n].quotes.USDUSD/e[n].quotes.USDCHF).toFixed(3),date:f(e[n].date)};a=[].concat(Object(j.a)(a),[u]);break;case g+x:var i={value:+(e[n].quotes.USDEUR/e[n].quotes.USDCHF).toFixed(3),date:f(e[n].date)};a=[].concat(Object(j.a)(a),[i])}return a}(e.data,a);return Object(d.a)(Object(d.a)({},e),{},{chartData:n})},setSelectedChartGroup:function(e,t){var a=t.payload.option,n=t.payload.position,c=function(e,t,a){var n=e;switch(a){case C:n=n&&n.second&&n.second.value===t.value?{first:t,second:n.first}:{first:t,second:n?n.second:null};break;case S:n=n&&n.first&&n.first.value===t.value?{first:n.second,second:t}:{first:n?n.first:null,second:t}}return n}(e.selectedChartGroup,a,n);return Object(d.a)(Object(d.a)({},e),{},{selectedChartGroup:c})},setIsFetching:function(e,t){var a=t.payload;return Object(d.a)(Object(d.a)({},e),{},{isFetching:a})}}}),V=q.actions,R=V.setDataSegment,H=V.setDataArray,M=V.setCurrentQuotes,G=V.setConvertValues,I=V.updateChartData,A=V.setSelectedChartGroup,Q=V.setIsFetching,J=function(e){return e.currency},B=q.reducer,K=(a(661),a(41),a(662),a(2)),P=function(e){var t=e.id,a=e.onChange,n=e.value,c=e.name,r=["input-component"].join(" ").trim();return Object(K.jsxs)("div",{className:r,children:[Object(K.jsx)("label",{children:c}),Object(K.jsx)("input",{id:t,type:"text",value:n,onChange:a})]})},W=a(378),z=a.n(W),L=(a(664),a(665),function(e){var t=e.name,a=e.selected,n=e.onChange;return Object(K.jsxs)("div",{className:"datepicker-custom-component",children:[Object(K.jsx)("label",{children:t}),Object(K.jsx)(z.a,{dateFormat:"dd.MM.yyyy",popperPlacement:"auto",selected:a,onChange:n,onChangeRaw:function(e){e.preventDefault()},maxDate:new Date})]})}),T=a.p+"static/media/european-union.3f54ee93.svg",$=a.p+"static/media/united-states.c29455bd.svg",X=a.p+"static/media/switzerland.167517f0.svg",Y=a.p+"static/media/calendar.e78d8c05.svg";function Z(){var e=Object(o.b)(),t=Object(o.c)(J),a=t.convertedValues,n=t.currentDate,c=function(t){var a,n={value:(a=t.target.value,a.replace(/^\.|[^\d\.]|\.(?=.*\.)|^0+(?=\d)/g,"")),currencyName:t.target.id};e(G(n))};return Object(K.jsxs)("form",{className:"form-card",children:[Object(K.jsx)("h2",{children:"Converter"}),Object(K.jsxs)("div",{className:"input-plus-image",children:[Object(K.jsx)(L,{name:"Date",selected:new Date(n),onChange:function(t){e(function(e){return function(){var t=Object(l.a)(i.a.mark((function t(a,n){var c,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=n().currency.data,r=0;case 2:if(!(r<c.length)){t.next=10;break}if(c[r].date!==p(e)){t.next=7;break}return a(M({quotes:c[r].quotes,date:p(e)})),a(G({value:"1",currencyName:m})),t.abrupt("return");case 7:r++,t.next=2;break;case 10:return t.prev=10,t.next=13,v(e);case 13:s=t.sent,a(R(s)),a(M({quotes:s.quotes,date:p(e)})),a(G({value:"1",currencyName:m})),localStorage.setItem("localCurrencyData",JSON.stringify(n().currency.data)),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(10),a(w(new Error(t.t0).message)),console.log(t.t0);case 24:case"end":return t.stop()}}),t,null,[[10,20]])})));return function(e,a){return t.apply(this,arguments)}}()}(t))}}),Object(K.jsx)("img",{src:Y,alt:"calendar"})]}),Object(K.jsx)("hr",{}),a&&Object(K.jsxs)("div",{className:"inputs-layout",children:[Object(K.jsxs)("div",{className:"input-plus-image",children:[Object(K.jsx)(P,{id:m,name:m,value:a.usdValue,onChange:c}),Object(K.jsx)("img",{src:$,alt:"US"})]}),Object(K.jsxs)("div",{className:"input-plus-image",children:[Object(K.jsx)(P,{id:x,name:x,value:a.eurValue,onChange:c}),Object(K.jsx)("img",{src:T,alt:"EU"})]}),Object(K.jsxs)("div",{className:"input-plus-image",children:[Object(K.jsx)(P,{id:g,name:g,value:a.chfValue,onChange:c}),Object(K.jsx)("img",{src:X,alt:"Switzerland"})]})]})]})}a(737);var _=a(395),ee=(a(738),function(e){var t=e.onChange,a=e.value,n=e.id,c=e.options;return Object(K.jsx)("div",{className:"select-component",children:Object(K.jsx)(_.a,{options:c,classNamePrefix:"custom",onChange:function(e){t&&t(e,n)},value:a,captureMenuScroll:!1,menuPlacement:"auto",theme:function(e){return Object(d.a)(Object(d.a)({},e),{},{colors:Object(d.a)(Object(d.a)({},e.colors),{},{primary25:"#ECEFF1",primary:"#DD2C00",neutral20:"#ECEFF1"})})}})})}),te=(a(747),a(885)),ae=a(879),ne=a(883),ce=a(392),re=a(393),se=a(171),oe=a(397),ue=function(e){var t=e.data.slice().reverse();return Object(K.jsx)("div",{className:"chart-component",children:Object(K.jsx)(te.a,{children:Object(K.jsxs)(ae.a,{data:t,margin:{top:10,right:30,left:0,bottom:0},children:[Object(K.jsx)("defs",{children:Object(K.jsxs)("linearGradient",{id:"customGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(K.jsx)("stop",{offset:"5%",stopColor:"#FF3D00",stopOpacity:.6}),Object(K.jsx)("stop",{offset:"95%",stopColor:"#FF9E80",stopOpacity:.2})]})}),Object(K.jsx)(ne.a,{strokeDasharray:"1"}),Object(K.jsx)(ce.a,{dataKey:"date",stroke:"#90A4AE"}),Object(K.jsx)(re.a,{domain:["dataMin - 0.008","dataMax + 0.008"],stroke:"#90A4AE"}),Object(K.jsx)(se.a,{content:Object(K.jsx)(ie,{})}),Object(K.jsx)(oe.a,{type:"linear",activeDot:{fill:"#FBE9E7",strokeWidth:1,stroke:"#DD2C00"},dataKey:"value",stroke:"#DD2C00",fillOpacity:1,fill:"url(#customGradient)"})]})})})},ie=function(e){var t=e.active,a=e.payload,n=e.label;return t&&a&&a.length?Object(K.jsxs)("div",{className:"custom-chart-tooltip",children:[Object(K.jsx)("p",{className:"value",children:a[0].value}),Object(K.jsx)("p",{className:"date",children:n})]}):null};function le(){var e=Object(o.b)(),t=Object(o.c)(J),a=t.selectedChartGroup,n=t.chartData,c=function(t,a){e(A({option:t,position:a})),e(I())};return Object(K.jsxs)("div",{className:"chart-card",children:[Object(K.jsx)("h2",{children:"Last 2 weeks"}),n&&Object(K.jsx)(ue,{data:n}),a?Object(K.jsxs)("div",{className:"select-group",children:[Object(K.jsx)(ee,{options:y,id:C,value:a.first,onChange:c}),Object(K.jsx)(ee,{options:y,id:S,value:a.second,onChange:c})]}):null]})}function de(){var e=Object(o.c)(J).data,t=Object(o.b)();return Object(n.useEffect)((function(){t(function(){var e=Object(l.a)(i.a.mark((function e(t,a){var n,c,r,s,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(Q(!0)),n=localStorage.getItem("localCurrencyData"),(c=n?JSON.parse(n):[]).length&&t(H(c)),r=0;case 5:if(!(r<14)){e.next=25;break}if((s=new Date).setDate(s.getDate()-r),(o=a().currency.data).length&&o[r]&&o[r].date===p(s)){e.next=22;break}return e.prev=10,e.next=13,v(s);case 13:(u=e.sent).success?t(R(u)):t(w(u.error.info)),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(10),t(Q(!1)),t(w(new Error(e.t0).message)),console.log(e.t0);case 22:r++,e.next=5;break;case 25:t(M({quotes:a().currency.data[0].quotes,date:a().currency.data[0].date})),t(G({value:"1",currencyName:m})),t(A({option:D.USD,position:C})),t(A({option:D.EUR,position:S})),t(I()),localStorage.setItem("localCurrencyData",JSON.stringify(a().currency.data)),t(Q(!1));case 32:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t,a){return e.apply(this,arguments)}}())}),[]),e.length?Object(K.jsxs)("div",{className:"dashboard-wrapper global-container",children:[Object(K.jsx)("h1",{children:"Currency Dashboard"}),Object(K.jsxs)("div",{className:"dashboard-grid",children:[Object(K.jsx)(Z,{}),Object(K.jsx)(le,{})]})]}):Object(K.jsxs)("div",{className:"wrong-view",children:[Object(K.jsx)("h1",{children:"Oops..!"}),Object(K.jsx)("br",{}),Object(K.jsx)("h3",{children:"Something went wrong"})]})}var je=a(394),be=(a(874),a.p+"static/media/preloader.3ae0416b.svg"),pe=function(e){return Object(je.a)(e),Object(K.jsx)("div",{className:"preloader",children:Object(K.jsx)("img",{src:be,alt:"spinner"})})},fe=(a(875),function(e){var t=Object(o.b)(),a=Object(o.c)(k).errorMessage;return a.length?Object(K.jsxs)("div",{className:"error-message",children:[Object(K.jsx)("p",{children:a}),Object(K.jsx)("div",{className:"close",onClick:function(){t(w(""))},children:"x"})]}):null});var Oe=function(){var e=Object(o.c)(J).isFetching;return Object(K.jsxs)("div",{className:"App",children:[Object(K.jsx)(fe,{}),e?Object(K.jsx)(pe,{}):Object(K.jsx)(de,{})]})},ve=Object(b.a)({reducer:{currency:B,messages:N}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(K.jsx)(c.a.StrictMode,{children:Object(K.jsx)(o.a,{store:ve,children:Object(K.jsx)(Oe,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[876,1,2]]]);
//# sourceMappingURL=main.9059670a.chunk.js.map